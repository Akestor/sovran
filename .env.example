# ─── Node ───────────────────────────────────────
NODE_ENV=development
LOG_LEVEL=debug
NODE_ID=0

# ─── Database ───────────────────────────────────
# Dev mode (host): localhost
# Container mode: postgresql://sovran:sovran_dev@postgres:5432/sovran
DATABASE_URL=postgresql://sovran:sovran_dev@localhost:5432/sovran

# ─── Redis ──────────────────────────────────────
# Dev mode (host): redis://localhost:6379
# Container mode: redis://redis:6379
REDIS_URL=redis://localhost:6379

# ─── NATS ───────────────────────────────────────
# Dev mode (host): nats://localhost:4222
# Container mode: nats://nats:4222
NATS_URL=nats://localhost:4222

# ─── JWT / Auth ───────────────────────────────────
# Active key ID for signing new tokens
JWT_ACTIVE_KID=key-1
# JSON array of {kid, secret} objects. All keys used for verification, active for signing.
# IMPORTANT: secrets must be >= 32 characters. Rotate by adding new key + changing JWT_ACTIVE_KID.
JWT_KEYS=[{"kid":"key-1","secret":"CHANGE_ME_TO_A_RANDOM_32_CHAR_SECRET_VALUE"}]
# Access token lifetime in seconds (default: 900 = 15 min)
JWT_ACCESS_TOKEN_TTL=900
# Refresh token lifetime in days (default: 30)
JWT_REFRESH_TOKEN_TTL_DAYS=30
# CORS origin for API (default: http://localhost:5173)
CORS_ORIGIN=http://localhost:5173
# Invite code validity in days (default: 7)
INVITE_CODE_TTL_DAYS=7

# ─── API ────────────────────────────────────────
API_HOST=0.0.0.0
API_PORT=3000

# ─── Gateway ────────────────────────────────────
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT=4000
MAX_PAYLOAD_BYTES=65536
RATE_LIMIT_PER_SECOND=30

# ─── Worker ─────────────────────────────────────
OUTBOX_POLL_INTERVAL_MS=1000
OUTBOX_BATCH_SIZE=100
WORKER_HEALTHCHECK_PATH=/tmp/.worker-healthy

# ─── MinIO (S3-compatible, dev only) ────────────
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=sovran-uploads
